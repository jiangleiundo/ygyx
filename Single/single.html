<!DOCTYPE HTML>
<html>
<head>
    <title>{$data.name}-Yinggui Cinema</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
    <meta name="keywords"
          content="YingGui,影鬼院线,Chinese Movie,yinggui,Yinggui cinema,movie,cinema,yinggui.tv,Yinggui,影鬼,北京影影网络科技有限公司"/>
    <meta name="description"
          content="Imagine: we eat roasted strings at home, drink beer, enjoy a latest movie, and live so comfortably. YingGui cinema provides online sync watching services for fans. "/>
    <link href="__HOME__/assets/css/bootstrap.min.css"/>
    <link href="__HOME__/assets/css/dashboard.css">
    <link href="__HOME__/assets/css/style.css"/>
    <link href="__HOME__/lib/layui/css/layui.css">
    <script src="__HOME__/assets/js/jquery-1.11.1.min.js"></script>
    <script src="__HOME__/lib/layui/layui.js"></script>
    <script>
        $(function () {
            $('#video').bind('contextmenu', function () {
                return false;
            });
            $("input[type='radio']").click(function () {
                $("input[type='radio'][name='" + $(this).attr('name') + "']").parent().removeClass("checked");
                $(this).parent().addClass("checked");
            });
        });
    </script>
</head>
<body style="background-color: black">
<div class="phoneyou">
    <nav id="navBar" class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <if condition='$Think.session.id gt 0'>
                <div class="navbar-header">
                    <a class="navbar-brand" href="{:U('index/index')}">
                        <img src="__LOGO__" alt=""/></a>
                </div>
                <div class="header-top-right">
                    <div class="signin">
                        <a href="{:U('portal/single/grxx')}" class="play-icon popup-with-zoom-anim">{$Think.session.user_nicename}</a>
                    </div>
                    <div class="signin"
                    <a href="{:U('portal/public/logout')}" class="play-icon popup-with-zoom-anim">Log out</a>
                </div>
        </div>
        <else/>
        <div class="navbar-header">
            <a class="navbar-brand" href="{:U('index/index')}">
                <img src="__LOGO__" alt=""/></a>
        </div>
        <div class="header-top-right">
            <div class="signin a">
                <a href="{:U('portal/single/zhuce')}" class="phoneyou">Sign Up</a>
            </div>
            <div class="signin">
                <a href="{:U('portal/single/denglu')}" class="phoneyou">Sign In</a>
            </div>
            <div class="clearfix"></div>
        </div>
        </if>
        <div class="clearfix"></div>
</div>
</nav>
</div>
<div class="pcyou">
    <nav class="navbar navbar-inverse navbar-fixed-top" style="background-color:black;border:black ">
        <div class="container-fluid">
            <if condition='$Think.session.id gt 0'>
                <div class="navbar-header">
                    <a class="navbar-brand" href="{:U('index/index')}">
                        <img src="__LOGO__" alt=""/></a>
                </div>
                <div class="header-top-right">
                    <div class="signin" onclick="showDes()">
                        <a href="#" style="z-index: 100" class="play-icon popup-with-zoom-anim">{$Think.session.user_nicename}</a>
                        <div style="color: black; position:absolute; margin-right: 50px; margin-bottom: 0;  z-index: 100"
                             id="a">
                            <table style="text-align: center;position: relative; left: 0; top: 10px; background-color: rgba(237,237,237,0.9); border-radius: 3px;">
                                <tr>
                                    <td><br/></td>
                                </tr>
                                <tr>
                                    <td>
                                        <div><img src="__TU__/{$avatar.avatar}"
                                                  style="border-radius: 50%;width:60px;height:60px;"/></div>
                                    </td>
                                </tr>
                                <tr>
                                    <td><br/></td>
                                </tr>
                                <tr class="jl-user-head">
                                    <td align="left"><a href="#" style="background: none;color: black"><img
                                            src="__HOME__/images/grxx.png" width="20px" height="20px"/> &nbsp
                                        Information</a></td>
                                </tr>
                                <tr class="jl-user-head">
                                    <td align="left"><a href="#" style="background: none;color: black"><img
                                            src="__HOME__/images/xxjl.png" width="20px" height="20px"/> &nbsp
                                        Message</a></td>
                                </tr>

                                <tr class="jl-user-head">
                                    <td align="left"><a href="#" style="background: none;color: black"><img
                                            src="__HOME__/images/xfls.png" width="20px" height="20px"/> &nbsp Have</a>
                                    </td>
                                </tr>
                                <tr class="jl-user-head">
                                    <td align="left"><a href="{:U('portal/public/logout')}"
                                                        style="background: none;color: black"><img
                                            src="__HOME__/images/tcdl.png" width="20px" height="20px"/> &nbsp Log
                                        Out</a></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="signin" onclick="showDes1()"
                         style="position: relative;right:3px;top: -5px;z-index: 100;">
                        <a style="background: none;"><img src="__HOME__/images/bfls.png" width="30px"
                                                          height="30px"/></a>
                        <div style="color: black;width: 100%;position:absolute;height: auto;margin-right: 0;" id="b">
                            <table id="phoned" class="jl-phone-layer">
                                <volist name="buy" id="vv">
                                    <tr style="line-height: 30px;">
                                        <td>
                                            <a style="background-color: inherit; padding: 4px 12px; color: #333; max-width: 180px; overflow: hidden;"
                                               href="{:U('portal/single/single1',array('id'=>$vv[video_id],'playtime'=>$vv[playtime]))}">{$vv.name}&nbsp;&nbsp;&nbsp;</a>
                                        </td>
                                        <td><img src="__HOME__/images/bofang.png" width="20px"></td>
                                    </tr>
                                </volist>
                            </table>
                        </div>
                    </div>

                </div>
                <!-- pop-up-box -->
                <else/>
                <div class="navbar-header">
                    <a class="navbar-brand" href="{:U('index/index')}">
                        <img src="__LOGO__" alt=""/></a>
                </div>
                <div class="header-top-right">
                    <div class="signin a">
                        <a href="#small-dialog2" class="play-icon popup-with-zoom-anim pcyou">Sign Up</a>
                        <!-- pop-up-box -->
                        <script type="text/javascript" src="__HOME__/js/modernizr.custom.min.js"></script>
                        <link href="__HOME__/css/popuo-box.css" rel="stylesheet" type="text/css" media="all"/>
                        <script src="__HOME__/js/jquery.magnific-popup.js" type="text/javascript"></script>
                        <!--//pop-up-box -->
                        <div id="small-dialog2" class="mfp-hide" style="z-index: 100;">
                            <h3>SIGN UP</h3>
                            <div class="fix" style="position: relative;">
                                <div class="jl-sign-up-pic lt">
                                    <img src="__HOME__/images/zhu.png">
                                </div>
                                <div class="signup">
                                    <form action="{:U('portal/public/register')}" method="post">
                                        <input type="text" class="email" placeholder="Email" required="required"
                                               name="email" id="user"/>
                                        <p></p>
                                        <span id="tish"></span>
                                        <input type="password" placeholder="Password" required="required"
                                               name="user_pass" id="pw1"/>
                                        <input type="password" placeholder="Confirm password" required="required"
                                               name="re_user_pass" id="pw2"/>
                                        <p></p>
                                        <span id="tishi"></span>
                                        <input type="text" class="email" placeholder="UserName" name="user_name"
                                               required="required"/>
                                        <p></p>
                                        <input type="checkbox" id="zcNanniu" checked="checked"/>
                                        <a target="_blank" href="http://www.yinggui.tv/public/mobile/WZZCXY.html"
                                           style="color: black;"> 阅读并接受《互联网服务条款》</a>
                                        <p></p>
                                        <div class="fix jl-sign-up">
                                            <div class="lt"><input type="submit" value="SIGN UP" id="submit"/></div>
                                            <div class="rt"><a href="#small-dialog"
                                                               class="play-icon popup-with-zoom-anim">Sign In</a></div>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <script>
                            $(document).ready(function () {
                                $('.popup-with-zoom-anim').magnificPopup({
                                    type: 'inline',
                                    fixedContentPos: false,
                                    fixedBgPos: true,
                                    overflowY: 'auto',
                                    closeBtnInside: true,
                                    preloader: false,
                                    midClick: true,
                                    removalDelay: 300,
                                    mainClass: 'my-mfp-zoom-in'
                                });
                            });
                        </script>
                    </div>
                    <div class="signin">
                        <a href="#small-dialog" class="play-icon popup-with-zoom-anim pcyou">Sign In</a>
                        <div id="small-dialog" class="mfp-hide" style="width: 800px;z-index: 100;">
                            <h3>SIGN IN</h3>
                            <div class="fix" style="position: relative;">
                                <div class="jl-sign-in-pic lt">
                                    <img src="__HOME__/images/deng.png"/>
                                </div>
                                <div class="signup">
                                    <form action="{:U('portal/public/login')}" method="post">
                                        <input type="text" class="email" placeholder="Enter email / mobile"
                                               required="required" id="in_user" name="user_name"/>
                                        <input type="password" placeholder="Password" required="required"
                                               pattern=".{6,}" title="Minimum 6 characters required" autocomplete="off"
                                               name="password"/>
                                        <input type="submit" value="SIGN IN"/>
                                    </form>
                                    <div class="forgot fix">
                                        <div class="lt"><a href="{:U('portal/single/zhaohui')}">Forgot password ?</a>
                                        </div>
                                        <div class="rt"><a href="#small-dialog2" class="play-icon popup-with-zoom-anim">Sign
                                            Up</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </if>
            <div class="clearfix"></div>
        </div>
    </nav>
</div>
<!--<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" style="position: relative;top: 0px;">-->
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <div class="show-top-grids">
        <div class="col-sm-9 single-left" style="background-color: black;position: relative;bottom: 40px">
            <br/>
            <br/>
            <div id="video" style="width:auto; height: auto;"></div>
            <div class="clearfix"></div>
            <div></div>
            <div class="song-info" align="left">
                <table width="100%">
                    <tr>
                        <td><h3 style="color: #f4f4f4; font-size: 24px; line-height: 36px;">{$data.name}</h3></td>
                        <td class="pcyou" align="right">
                            <volist name="cate" id="voo">
                                <span class="layui-badge layui-bg-blue m-g-r-10">{$voo.name}</span>
                            </volist>
                        </td>
                    </tr>
                </table>
            </div>
            <div style="width: 100%;height: auto;" class="xiaopinglun">
                <div align="center" style="position: relative;top: -15px; color: #999">
                    <table style="text-align: center;width: 100%">
                        <tr>
                            <td colspan="2" style="text-align: left; line-height: 30px;">
                                <volist name="cate" id="voo">
                                    <span class="layui-badge layui-bg-blue m-g-r-10">{$voo.name}</span>
                                </volist>
                            </td>
                        </tr>
                        <tr style="line-height: 22px; text-align: left;">
                            <td width="20%">Score: {$data.score}</td>
                            <td width="80%">view: {$data.buy_count}</td>
                            <!--<td colspan="3" class="phoneyou" align="right">-->
                            <!--<volist name="cate" id="voo">-->
                            <!--<span class="layui-badge layui-bg-blue">{$voo.name}</span>&nbsp;&nbsp;-->
                            <!--</volist>-->
                            <!--</td>-->
                        </tr>
                        <tr>
                            <td colspan="3" style="text-align: left;"><a
                                    style="position: relative;top: 0; color: #999;"><span>subtitle: </span><span
                                    style="">{$data.type|str_replace=',','&nbsp;&nbsp;',###}</span></a></td>
                        </tr>
                        <tr>
                            <td><br/></td>
                        </tr>
                        <tr>
                            <td colspan="3" style="text-align: left;">

                                <p style="color: yellow; margin-bottom: 8px;">${$data.price} &nbsp;<span
                                        style="color: #999; font-size: 10px;">Lease 48 hours</span></p>
                                <if condition='$Think.session.id gt 0'>
                                    <a href="{:U('portal/single/buy_single',['single_id'=>$data['id']])}"><img
                                            src="__HOME__/images/x-click-but23.gif" border="0"
                                            alt="PayPal——最安全便捷的在线支付方式！"></a>
                                    <else/>
                                    <a href="{:U('portal/single/denglu')}"><img src="__HOME__/images/x-click-but23.gif"
                                                                                border="0" alt="PayPal——最安全便捷的在线支付方式！"></a>
                                </if>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="published">
                <script type="text/javascript">
                    var videoObject = {
                        //playerID:'ckplayer01',//播放器ID，第一个字符不能是数字，用来在使用多个播放器时监听到的函数将在所有参数最后添加一个参数用来获取播放器的内容
                        container: '#video', //容器的ID或className
                        variable: 'player', //播放函数名称
                        loaded: 'loadedHandler', //当播放器加载后执行的函数
                        loop: false, //播放结束是否循环播放
                        //autoplay: true, //是否自动播放
                        //duration: 500, //设置视频总时间
//				!!!!!!
//				cktrack: '__HOME__/material/srt.srt', //字幕文件
                        poster: '__TU__/{$data.view_image}', //封面图片
//				preview: { //预览图片
//					file: ['__HOME__/material/mydream_en1800_1010_01.png', '__HOME__/material/mydream_en1800_1010_02.png'],
//					scale: 2
//				},
                        config: '', //指定配置函数
                        debug: true, //是否开启调试模式
                        //flashplayer: true, //强制使用flashplayer
                        drag: 'start', //拖动的属性
                        seek: 0, //默认跳转的时间
                        //保存在cookie的视频播放时间
                        //getCookie("Time");
                        //playbackrate:1,//默认速度的编号，只对html5有效,设置成-1则不显示倍速
                        //advertisements:'website:ad.json',
                        //front:'frontFun',//上一集的操作函数
                        //next:'nextFun',//下一集的操作
                        //广告部分开始
//				adfront: 'http://www.ckplayer.com/yytf/swf/front001.swf,http://www.ckplayer.com/yytf/swf/front002.swf', //前置广告
//				adfronttime: '15,15',
//				adfrontlink: '',
//				adpause: 'http://www.ckplayer.com/yytf/swf/pause001.swf,http://www.ckplayer.com/yytf/swf/pause002.swf',
//				adpausetime: '5,5',
//				adpauselink: '',
//				adinsert: 'http://www.ckplayer.com/yytf/swf/insert001.swf,http://www.ckplayer.com/yytf/swf/insert002.swf',
//				adinserttime: '10,10',
//				adinsertlink: '',
//				inserttime: '10,80',
//				adend: 'http://www.ckplayer.com/yytf/swf/end001.swf,http://www.ckplayer.com/yytf/swf/end002.swf',
//				adendtime: '15,15',
//				adendlink: '',
                        //广告部分结束
//				promptSpot: [ //提示点
//					{
//						words: '提示点文字01',
//						time: 30
//					},
//					{
//						words: '提示点文字02',
//						time: 150
//					}
//				],
                        //mobileCkControls:true,//是否在移动端（包括ios）环境中显示控制栏
                        //live:true,//是否是直播视频，true=直播，false=点播
                        video: [
                            ['{$ping.1}', 'video/mp4', '标清', 1]
                        ]
                    };
                    var player = new ckplayer(videoObject);

                    function loadedHandler() {
                        player.addListener('error', errorHandler); //监听视频加载出错
                        player.addListener('loadedmetadata', loadedMetaDataHandler); //监听元数据
                        player.addListener('duration', durationHandler); //监听播放时间
                        player.addListener('time', timeHandler); //监听播放时间
                        player.addListener('play', playHandler); //监听暂停播放
                        player.addListener('pause', pauseHandler); //监听暂停播放
                        player.addListener('buffer', bufferHandler); //监听缓冲状态
                        player.addListener('seek', seekHandler); //监听跳转播放完成
                        player.addListener('seekTime', seekTimeHandler); //监听跳转播放完成
                        player.addListener('volume', volumeChangeHandler); //监听音量改变
                        player.addListener('full', fullHandler); //监听全屏/非全屏切换
                        player.addListener('ended', endedHandler); //监听播放结束
                        player.addListener('screenshot', screenshotHandler); //监听截图功能
                        player.addListener('mouse', mouseHandler); //监听鼠标坐标
                        player.addListener('frontAd', frontAdHandler); //监听前置广告的动作
                        player.addListener('wheel', wheelHandler); //监听视频放大缩小
                        player.addListener('controlBar', controlBarHandler); //监听控制栏显示隐藏事件
                        player.addListener('clickEvent', clickEventHandler); //监听点击事件
                        player.addListener('definitionChange', definitionChangeHandler); //监听清晰度切换事件
                        player.addListener('speed', speedHandler); //监听加载速度
                    }

                    function errorHandler() {
                        console.log('出错');
                        changeText('.playerstate', '状态：视频加载错误，停止执行其它动作，等待其它操作');
                    }

                    function loadedMetaDataHandler() {
                        var metaData = player.getMetaDate();
                        //alert(metaData['duration']);
                        var html = '';
                        //console.log(metaData);
                        if (parseInt(metaData['videoWidth']) > 0) {
                            changeText('.playerstate', '状态：获取到元数据信息，如果数据错误，可以使用延迟获取');
                            html += '总时间：' + metaData['duration'] + '秒，';
                            html += '音量：' + metaData['volume'] + '（范围0-1），';
                            html += '播放器的宽度：' + metaData['width'] + 'px，';
                            html += '播放器的高度：' + metaData['height'] + 'px，';
                            html += '视频宽度：' + metaData['videoWidth'] + 'px，';
                            html += '视频高度：' + metaData['videoHeight'] + 'px，';
                            html += '视频原始宽度：' + metaData['streamWidth'] + 'px，';
                            html += '视频原始高度：' + metaData['streamHeight'] + 'px，';
                            html += '是否暂停状态：' + metaData['paused'];
                        } else {
                            changeText('.playerstate', '状态：未正确获取到元数据信息');
                            html = '没有获取到元数据';
                        }
                        changeText('.metadata', html);
                        //alert(metaData['duration']);
                    }

                    //			function playHandler() {
                    //				//player.animateResume();//继续播放所有弹幕
                    //				changeText('.playstate', getHtml('.playstate') + ' 播放');
                    //				window.setTimeout(function() {
                    //					loadedMetaDataHandler();
                    //				}, 1000);
                    //				loadedMetaDataHandler();
                    //			}
                    //
                    //			function pauseHandler() {
                    //				//player.animatePause();//暂停所有弹幕
                    //				changeText('.playstate', getHtml('.playstate') + ' 暂停');
                    //				loadedMetaDataHandler();
                    //			}
                    function timeHandler(time) {
//				if (time > -1) {
//					SetCookie("Time", time);
//				}
                        changeText('.currenttimestate', '当前播放时间（秒）：' + time);
                        //var palytime_id = timeHandler(time);
                        //把当前播放时间放入cookie
//					var palytime = getCookie("Time");
//					$.ajax({
//						type:'get',
//						url:'__CONTROLLER__/palytime/id/' + palytime
//					})
                    }

                    //将播放时间写入cookie的函数
                    //			function SetCookie(name, value)//两个参数，一个是cookie的名子，一个是值
                    //			{
                    //				var Days = 30; //此 cookie 将被保存 30 天
                    //				var exp = new Date(); //new Date("December 31, 9998");
                    //				exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);
                    //				document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
                    //			}
                    //			//获取播放时间的cookie函数
                    //			function getCookie(name)//取cookies函数
                    //			{
                    //				var arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
                    //				if (arr != null) return unescape(arr[2]); return null;
                    //
                    //			}
                    //alert(getCookie("Time"));
                    function durationHandler(duration) {
                        changeText('.duration', '总时间（秒）：' + duration);
                    }

                    function seekHandler(state) {
                        changeText('.seekstate', getHtml('.seekstate') + ' ' + state);
                    }

                    function seekTimeHandler(time) {
                        changeText('.seekstate', getHtml('.seekstate') + ' seekTime:' + time);
                    }

                    function bufferHandler(buffer) {
                        //console.log(buffer);
                        changeText('.bufferstate', '缓冲：' + buffer);
                    }

                    function volumeChangeHandler(vol) {
                        changeText('.volumechangestate', '当前音量：' + vol);
                    }

                    function speedHandler(n) {
                        changeText('.speed', '当前加载速率：' + n);
                    }

                    function screenshotHandler(obj) {
                        changeText('.screenshot', '图片名称：' + obj['name'] + ',截图对象：' + obj['object'] + ',是否用户保存：' + obj['save'] + ',图片：<img src="' + obj['base64'] + '">');
                    }

                    function fullHandler(b) {
                        if (b) {
                            html = ' 全屏';
                        } else {
                            html = ' 否';
                        }
                        changeText('.fullstate', getHtml('.fullstate') + html);
                    }

                    function endedHandler() {
                        changeText('.endedstate', '播放结束');
                    }

                    function mouseHandler(obj) {
                        changeText('.mouse', '鼠标位置，x：' + obj['x'] + '，y：' + obj['y']);
                    }

                    function frontAdHandler(status) {
                        changeText('.frontad', getHtml('.frontad') + ' ' + status);
                    }

                    var zoomNow = 1;

                    function wheelHandler(n) {
                        if (n > 0) {
                            if (zoomNow < 5) {
                                zoomNow += 0.1;
                            }
                        } else {
                            if (zoomNow > 0) {
                                zoomNow -= 0.1;
                            }
                        }
                        player.videoZoom(zoomNow);//支持鼠标滚轮控制放大缩小
                    }

                    function controlBarHandler(show) {
                        if (show) {
                            html = ' 显示';
                        } else {
                            html = ' 隐藏';
                        }
                        changeText('.controlBar', getHtml('.controlBar') + html);
                    }

                    function clickEventHandler(eve) {
                        changeText('.clickEvent', getHtml('.clickEvent') + ' ' + eve);
                    }

                    function definitionChangeHandler(num) {
                        changeText('.definitionChange', getHtml('.definitionChange') + ',切换清晰度编号' + num);
                    }

                    var videoChangeNum = 0;

                    function seekTime() {
                        var time = parseInt(player.getByElement('.seektime').value);
                        var metaData = player.getMetaDate();
                        var duration = metaData['duration'];
                        if (time < 0) {
                            alert('请填写大于0的数字');
                            return;
                        }
                        if (time > duration) {
                            alert('请填写小于' + duration + '的数字');
                            return;
                        }
                        player.videoSeek(time);
                    }

                    function changeVolume() {
                        var volume = player.getByElement('.changevolume').value;
                        volume = Math.floor(volume * 100) / 100;
                        if (volume < 0) {
                            alert('请填写大于0的数字');
                            return;
                        }
                        if (volume > 1) {
                            alert('请填写小于1的数字');
                            return;
                        }
                        player.changeVolume(volume);
                    }

                    //			function changeSize() {
                    //				player.changeSize(w, h)
                    //			}
                    //
                    //			function frontFun() {
                    //				alert('点击了前一集');
                    //			}
                    //
                    //			function nextFun() {
                    //				alert('点击了下一集');
                    //			}
                    //
                    //			function adjump() {
                    //				alert('点击了跳过广告按钮');
                    //			}
                    function newVideo() {
                        var videoUrl = player.getByElement('.videourl').value;
                        changeVideo(videoUrl);
                    }

                    function newVideo2() {
                        var videoUrl = player.getByElement('.videourl2').value;
                        changeVideo(videoUrl);
                    }

                    function changeVideo(videoUrl) {
                        if (player == null) {
                            return;
                        }
                        var newVideoObject = {
                            container: '#video', //容器的ID
                            variable: 'player',
                            autoplay: true, //是否自动播放
                            loaded: 'loadedHandler', //当播放器加载后执行的函数
                            video: videoUrl
                        };
                        //判断是需要重新加载播放器还是直接换新地址
                        if (player.playerType == 'html5video') {
                            if (player.getFileExt(videoUrl) == '.flv' || player.getFileExt(videoUrl) == '.m3u8' || player.getFileExt(videoUrl) == '.f4v' || videoUrl.substr(0, 4) == 'rtmp') {
                                player.removeChild();

                                player = null;
                                player = new ckplayer();
                                player.embed(newVideoObject);
                            } else {
                                player.newVideo(newVideoObject);
                            }
                        } else {
                            if (player.getFileExt(videoUrl) == '.mp4' || player.getFileExt(videoUrl) == '.webm' || player.getFileExt(videoUrl) == '.ogg') {
                                player = null;
                                player = new ckplayer();
                                player.embed(newVideoObject);
                            } else {
                                player.newVideo(newVideoObject);
                            }
                        }
                    }

                    var elementTemp = null; //保存元件
                    function newElement() {
                        if (elementTemp != null) {
                            alert('为了演示的简单性，本实例只能建立一个元件');
                            return;
                        }
                        var attribute = {
                            list: [ //list=定义元素列表
                                {
                                    type: 'png', //定义元素类型：只有二种类型，image=使用图片，text=文本
                                    file: '__HOME__/material/logo.png', //图片地址
                                    radius: 30, //图片圆角弧度
                                    width: 30, //定义图片宽，必需要定义
                                    height: 30, //定义图片高，必需要定义
                                    alpha: 0.9, //图片透明度(0-1)
                                    marginLeft: 10, //图片离左边的距离
                                    marginRight: 10, //图片离右边的距离
                                    marginTop: 10, //图片离上边的距离
                                    marginBottom: 10, //图片离下边的距离
                                    clickEvent: "link->http://www.ckplayer.com"
                                }, {
                                    type: 'text', //说明是文本
                                    text: '演示弹幕内容，弹幕只支持普通文本，不支持HTML', //文本内容
                                    color: '0xFFDD00', //文本颜色
                                    size: 14, //文本字体大小，单位：px
                                    font: '"Microsoft YaHei", YaHei, "微软雅黑", SimHei,"\5FAE\8F6F\96C5\9ED1", "黑体",Arial', //文本字体
                                    leading: 30, //文字行距
                                    alpha: 1, //文本透明度(0-1)
                                    paddingLeft: 10, //文本内左边距离
                                    paddingRight: 10, //文本内右边距离
                                    paddingTop: 0, //文本内上边的距离
                                    paddingBottom: 0, //文本内下边的距离
                                    marginLeft: 0, //文本离左边的距离
                                    marginRight: 10, //文本离右边的距离
                                    marginTop: 10, //文本离上边的距离
                                    marginBottom: 0, //文本离下边的距离
                                    backgroundColor: '0xFF0000', //文本的背景颜色
                                    backAlpha: 0.5, //文本的背景透明度(0-1)
                                    backRadius: 30, //文本的背景圆角弧度
                                    clickEvent: "actionScript->videoPlay"
                                }
                            ],
                            x: 10, //元件x轴坐标，注意，如果定义了position就没有必要定义x,y的值了，x,y支持数字和百分比，使用百分比时请使用单引号，比如'50%'
                            y: 50, //元件y轴坐标
                            //position:[1,1],//位置[x轴对齐方式（0=左，1=中，2=右），y轴对齐方式（0=上，1=中，2=下），x轴偏移量（不填写或null则自动判断，第一个值为0=紧贴左边，1=中间对齐，2=贴合右边），y轴偏移量（不填写或null则自动判断，0=紧贴上方，1=中间对齐，2=紧贴下方）]
                            alpha: 1, //元件的透明度
                            backgroundColor: '0xFFDD00', //元件的背景色
                            backAlpha: 0.5, //元件的背景透明度(0-1)
                            backRadius: 60, //元件的背景圆角弧度
                            clickEvent: "actionScript->videoPlay"
                        };
                        elementTemp = player.addElement(attribute);
                    }

                    function deleteElement() {
                        if (elementTemp != null) {
                            player.deleteElement(elementTemp);
                            elementTemp = null;
                        } else {
                            alert('演示删除元件需要先添加');
                        }
                    }

                    function newDanmu() {
                        //弹幕说明
                        var danmuObj = {
                            list: [{
                                type: 'image', //定义元素类型：只有二种类型，image=使用图片，text=文本
                                file: '__HOME__/material/logo.png', //图片地址
                                radius: 30, //图片圆角弧度
                                width: 30, //定义图片宽，必需要定义
                                height: 30, //定义图片高，必需要定义
                                alpha: 0.9, //图片透明度(0-1)
                                marginLeft: 10, //图片离左边的距离
                                marginRight: 10, //图片离右边的距离
                                marginTop: 10, //图片离上边的距离
                                marginBottom: 10, //图片离下边的距离
                                clickEvent: "link->http://"
                            }, {
                                type: 'text', //说明是文本
                                text: '演示弹幕内容，弹幕只支持普通文本，不支持HTML', //文本内容
                                color: '0xFFDD00', //文本颜色
                                size: 14, //文本字体大小，单位：px
                                font: '"Microsoft YaHei", YaHei, "微软雅黑", SimHei,"\5FAE\8F6F\96C5\9ED1", "黑体",Arial', //文本字体
                                leading: 30, //文字行距
                                alpha: 1, //文本透明度(0-1)
                                paddingLeft: 10, //文本内左边距离
                                paddingRight: 10, //文本内右边距离
                                paddingTop: 0, //文本内上边的距离
                                paddingBottom: 0, //文本内下边的距离
                                marginLeft: 0, //文本离左边的距离
                                marginRight: 10, //文本离右边的距离
                                marginTop: 10, //文本离上边的距离
                                marginBottom: 0, //文本离下边的距离
                                backgroundColor: '0xFF0000', //文本的背景颜色
                                backAlpha: 0.5, //文本的背景透明度(0-1)
                                backRadius: 30, //文本的背景圆角弧度
                                clickEvent: "actionScript->videoPlay"
                            }],
                            x: '100%', //x轴坐标
                            y: "50%", //y轴坐标
                            //position:[2,1,0],//位置[x轴对齐方式（0=左，1=中，2=右），y轴对齐方式（0=上，1=中，2=下），x轴偏移量（不填写或null则自动判断，第一个值为0=紧贴左边，1=中间对齐，2=贴合右边），y轴偏移量（不填写或null则自动判断，0=紧贴上方，1=中间对齐，2=紧贴下方）]
                            alpha: 1,
                            //backgroundColor:'#FFFFFF',
                            backAlpha: 0.8,
                            backRadius: 30 //背景圆角弧度
                        }
                        var danmu = player.addElement(danmuObj);
                        var danmuS = player.getElement(danmu);
                        var obj = {
                            element: danmu,
                            parameter: 'x',
                            static: true, //是否禁止其它属性，true=是，即当x(y)(alpha)变化时，y(x)(x,y)在播放器尺寸变化时不允许变化
                            effect: 'None.easeOut',
                            start: null,
                            end: -danmuS['width'],
                            speed: 10,
                            overStop: true,
                            pauseStop: true,
                            callBack: 'deleteChild'
                        };
                        var danmuAnimate = player.animate(obj);
                    }

                    function deleteChild(ele) {
                        if (player) {
                            player.deleteElement(ele);
                        }
                    }

                    function changeText(div, text) {
                        player.getByElement(div).innerHTML = text;
                    }

                    function getHtml(div) {
                        return player.getByElement(div).innerHTML;
                    }

                    var zoom = 1;
                </script>
                <script>
                    $(document).ready(function () {
                        size_li = $("#myList li").size();
                        x = 1;
                        $('#myList li:lt(' + x + ')').show();
                        $('#loadMore').click(function () {
                            x = (x + 1 <= size_li) ? x + 1 : size_li;
                            $('#myList li:lt(' + x + ')').show();
                        });
                        $('#showLess').click(function () {
                            x = (x - 1 < 0) ? 1 : x - 1;
                            $('#myList li').not(':lt(' + x + ')').hide();
                        });
                    });
                </script>
                <div class="load_more" style="background-color: black; color: #999;">
                    <ul id="myList">
                        <li>
                            <h4>Synopsis</h4>
                            <p id="zk1">{$data.content}</p>
                        </li>

                    </ul>
                    <ul>
                        <li>
                            <h4>Film clerk</h4>
                            <p id="zk2">{$data.fiml|str_replace=',','&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',###}</p>
                        </li>
                    </ul>
                    <div class="pingfenPc layui-form-item">
                        <table width="100%" style="text-align: center;">
                            <tr>
                                <td align="left"><label for="sex-man" class="radio_label">
                                    <input type="radio" value="10" id="sex-man" name="sex"/>
                                    10.0 &nbsp;&nbsp;&nbsp;Classic
                                </label>
                                </td>
                                <td style="text-align: left;">12,767</td>
                            </tr>
                            <tr>
                                <td align="left">
                                    <label for="sex-female1" class="radio_label">
                                        <input type="radio" value="7.5" id="sex-female1" name="sex"/>
                                        7.5 &nbsp;&nbsp; Marvellous
                                    </label></td>
                                <td style="text-align: left;">4,800</td>
                            </tr>
                            <tr>
                                <td align="left">
                                    <label for="sex-female2" class="radio_label">
                                        <input type="radio" value="5" id="sex-female2" name="sex"/>
                                        5.0 &nbsp;&nbsp; reluctantly
                                    </label></td>
                                <td style="text-align: left;">1,150</td>
                            </tr>
                            <tr>
                                <td align="left">
                                    <label for="sex-female3" class="radio_label">
                                        <input type="radio" value="2.5" id="sex-female3" name="sex"/>
                                        2.5 &nbsp;&nbsp; Rotten
                                    </label></td>
                                <td style="text-align: left;">256</td>
                            </tr>
                            <tr>
                                <td align="left">
                                    <label for="sex-female4" class="radio_label">
                                        <input type="radio" value="0" id="sex-female4" name="sex"/>
                                        0.0 &nbsp;&nbsp;Waste time
                                    </label>
                                </td>
                                <td style="text-align: left;">108</td>
                            </tr>
                        </table>
                        <div class="all-comments-info" style="margin-top: 8px;">
                            <form class="layui-form">
                                <textarea maxlength="150" class="layui-textarea"
                                          placeholder="Please fill in the comments here.Can enter up to 150 words."
                                          style="resize:none;width: 100%;height: 100px;color: white;background-color: #272C2E;"></textarea>
                                <br/>
                                <button style="position: relative;left: 90%;" disabled="disabled"
                                        class="layui-btn layui-btn-xs layui-btn-normal">Comment
                                </button>
                            </form>
                        </div>
                    </div>
                    <div class="xiaopinglun">
                        <div class="pingfenPhone">
                            <table width="100%" style="text-align: center;position: relative;top: 0px;">
                                <tr>
                                    <td align="left">
                                        <label for="sex-man1" class="radio_label">&nbsp;
                                            <input type="radio" value="10" id="sex-man1" name="phonepingfen"/>
                                            10.0 &nbsp;&nbsp;&nbsp;Classic
                                        </label>
                                    </td>
                                    <td style="text-align: left;">12,767</td>
                                </tr>
                                <tr>
                                    <td align="left">
                                        <label for="sex-female11" class="radio_label">&nbsp;
                                            <input type="radio" value="7.5" id="sex-female11" name="phonepingfen"/>
                                            7.5 &nbsp;&nbsp; Marvellous
                                        </label></td>
                                    <td style="text-align: left;">4,800</td>
                                </tr>
                                <tr>
                                    <td align="left">
                                        <label for="sex-female22" class="radio_label">&nbsp;
                                            <input type="radio" value="5" id="sex-female22" name="phonepingfen"/>
                                            5.0 &nbsp;&nbsp; reluctantly
                                        </label></td>
                                    <td style="text-align: left;">1,150</td>
                                </tr>
                                <tr>
                                    <td align="left">
                                        <label for="sex-female33" class="radio_label">&nbsp;
                                            <input type="radio" value="2.5" id="sex-female33" name="phonepingfen"/>
                                            2.5 &nbsp;&nbsp; Rotten
                                        </label></td>
                                    <td style="text-align: left;">256</td>
                                </tr>
                                <tr>
                                    <td align="left">
                                        <label for="sex-female44" class="radio_label">&nbsp;
                                            <input type="radio" value="0" id="sex-female44" name="phonepingfen"/>
                                            0.0 &nbsp;&nbsp;Waste time
                                        </label>
                                    </td>
                                    <td style="text-align: left;">108</td>
                                </tr>
                            </table>
                        </div>
                        <div style="height: 150px;position: relative;top: 0%;">
                            <div class="all-comments-info" style="position: relative;top: 0px;width:100%;">
                                <div style="position: relative;top: 0px;">
                                    <form class="layui-form">
                                        <textarea maxlength="150" class="layui-textarea"
                                                  placeholder="Please fill in the comments here.Can enter up to 150 words."
                                                  style="resize:none;width: 100%;height: 100px;color: white;background-color: #272C2E;"></textarea>
                                        <br/>
                                        <button style="position: relative;left: 37%;" disabled="disabled"
                                                class="layui-btn layui-btn-xs layui-btn-normal">Comment
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <volist name="lun" id="v">
                            <div class="media-grids">
                                <div class="media">
                                    <div class="media">
                                        <a class="pull-left" href="#">
                                            <img src="__TU__/{$v.image}" style="width: 65px;height:65px;"/>
                                        </a>
                                        <div class="media-body">
                                            <h4 class="media-heading">{$v.nickname}</h4>
                                            <p>{$v.content}</p>
                                        </div>
                                    </div>
                                    <div class="jl-bar-comment-ok fix">
                                        <a class="jl-comment-isVote rt" data-id="{$v.id}"></a>
                                        <span id="jl_comment0_{$v.id}" class="rt" data-num="{$v.spot}">{$v.spot}</span>
                                    </div>
                                </div>
                            </div>
                        </volist>
                    </div>
                    <div align="center" style="width: auto;" class="bigFooter">
                        <table style="text-align: center; line-height: 24px; margin: 20px 0 30px 0;">
                            <tr>
                                <td style="color: white;white-space:nowrap;">E-mail: yinggui@yinggui.tv</td>
                                <td style="color: white;white-space:nowrap;">Tel:010—5721 2941</td>
                                <td style="color: white;white-space:nowrap;">Copyright <a>@YingGui</a> All Right
                                    Resevred
                                </td>
                            </tr>
                            <tr>
                                <td style="color: white;white-space:nowrap;">京IPC备17066467</td>
                                <td style="color: white;white-space:nowrap;">北京影影网络科技有限公司</td>
                                <td style="white-space:nowrap;"><a style="color: firebrick;"
                                                                   href="http://yinggui.tv/admin/public/content"
                                                                   target="_blank">内容合作中心</a></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-3 col-md-2 sidebar pinglun" style="background: none">
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
            <volist name="lun" id="v">
                <div class="media-grids" style="position: relative;top: -70px;">

                    <div class="media">
                        <div class="jl-bar-comment fix">
                            <div class="lt">
                                <img src="__TU__/{$v.image}" style="border-radius: 50%;width: 30px;height:30px;"/>
                            </div>
                            <h4 class="lt">{$v.nickname}</h4>
                        </div>
                        <div class="jl-bar-comment-txt">
                            <p>{$v.content}</p>
                        </div>
                        <div class="jl-bar-comment-ok fix">
                            <a class="jl-comment-isOk rt" data-id="{$v.id}"></a>
                            <span id="jl_comment_{$v.id}" class="rt" data-num="{$v.spot}">{$v.spot}</span>
                        </div>
                    </div>
                </div>
            </volist>
        </div>
        <script type="text/javascript">

            voteComment("jl-comment-isVote", "jl_comment0_"); //screen
            voteComment("jl-comment-isOk", "jl_comment_"); //pad
            /**
             * 点赞功能
             * @param curCls 当前点击点赞元素的class
             * @param cur_id 当前点赞数量id
             */
            function voteComment(curCls, cur_id) {
                $("." + curCls).on("click", function () {
                    var that = $(this),
                        isOk = that.hasClass("active"),
                        curId = that.attr("data-id"),
                        curObj = $$(cur_id + curId),
                        commentNum = parseInt(curObj.innerHTML);

                    if (isOk) {
                        that.removeClass("active");
                        curObj.innerHTML = commentNum - 1;
                    } else {
                        that.addClass("active");
                        curObj.innerHTML = commentNum + 1;

                        //ajax异步请求, 只要点赞就会添加到服务器，取消点赞暂时没有请求
                        $.post("{:U('portal/single/spot')}", {id: curId}, function (data) {
                            if (data.status == 1) {
                            } else {
                                //alert('您已经点过赞了,不要重复哦！');
                            }
                        }, 'json')
                    }
                })
            }

            //原生返回当前id对象
            function $$(id) {
                return document.getElementById(id);
            }
        </script>
        <div class="col-md-3  youceBuy jl-payPal-info">
            <div class="single-grid-right">
                <table style="width: 100%;">
                    <tr>
                        <td><h3><span>Score:</span></h3></td>
                        <td align="right"><h3><span>{$data.score}</span></h3></td>
                    </tr>
                    <tr>
                        <td><h3><span>View:</span></h3></td>
                        <td align="right"><h3>{$data.buy_count}</h3></td>
                    </tr>
                    <tr>
                        <td><h3>Subtitle:</h3></td>
                        <td align="right">{$data.type|str_replace=',','&nbsp;&nbsp;',###}</td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><h3><span
                                style="font-size: 130%; line-height: 2; color: yellow;">${$data.price}</span></h3></td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center" style="line-height: 1.3;">Lease 48 hours</td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center">
                            <if condition='$Think.session.id gt 0'>
                                <a href="{:U('portal/single/buy_single',['single_id'=>$data['id']])}"><img
                                        src="__HOME__/images/btn_buynowCC_LG.gif" border="0"
                                        alt="PayPal——最安全便捷的在线支付方式！"></a>
                                <else/>
                                <br/>
                                <a href="#small-dialog" class="play-icon popup-with-zoom-anim"><img
                                        src="__HOME__/images/btn_buynowCC_LG.gif" border="0"
                                        alt="PayPal——最安全便捷的在线支付方式！"></a>
                            </if>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-md-3 single-right youce">
            <h3 style="color: yellowgreen">Recomm</h3>
            <div class="single-grid-right">
                <volist name="tui" id="vo">

                    <div class="single-right-grids">
                        <div class="col-md-4 single-right-grid-left">
                            <a href="{:U('portal/single/single','id='.$vo[id])}"><img src="__TU__/{$vo.view_image}"
                                                                                      alt=""/></a>
                        </div>
                        <div class="col-md-8 single-right-grid-right">
                            <!--<a href="#" class="title"> {$vo.content}</a>-->
                            <p class="author">
                                <a href="{:U('portal/single/single','id='.$vo[id])}" class="author">{$vo.name}</a>
                            </p>
                            <p class="views">{$vo.score} score</p>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </volist>
            </div>
        </div>
    </div>
</div>
<div align="center" style="width: auto;" class="smallFooter">
    <hr/>
    <table style="text-align: center;font-size: 10px; line-height: 14px; margin: 20px 0 20px 0;">
        <tr>
            <td style="color:white ;white-space:nowrap;">E-mail: yinggui@yinggui.tv</td>
            <td style="color:white ;white-space:nowrap;">Tel:010—5721 2941</td>
        </tr>
        <tr>
            <td style="color: white;white-space:nowrap;">京IPC备17066467</td>
            <td style="color: white;white-space:nowrap;">北京影影网络科技有限公司</td>
        </tr>
        <tr>
            <td style="color: white;white-space:nowrap;">Copyright <a>@YingGui</a> All Right Resevred</td>
            <td style="white-space:nowrap;"><a style="color: firebrick;" href="http://yinggui.tv/admin/public/content"
                                               target="_blank">内容合作中心</a></td>
        </tr>
    </table>
</div>
<!-- footer -->
<script src="__HOME__/js/bootstrap.min.js"></script>
<script src="__HOME__/js/utility.js"></script>
<script>
    //滚动隐藏头部
    window.onscroll = function () {
        var t = document.documentElement.scrollTop || document.body.scrollTop;  //获取距离页面顶部的距离
        var navBar = document.getElementById("navBar"); //获取div元素
        if (t >= 66) { //当距离顶部超过66px时
            navBar.style.display = "none";
        } else {
            navBar.style.display = "block";
        }
    };

    $(function () {
        commonFn.checkEmail("user"); //用户注册
        commonFn.checkEmail("in_user"); //用户登录

        $("#pw2").on("blur", function () {
            var pw1 = $("#pw1").val(),
                pw2 = $("#pw2").val();

            if (commonFn.isEmpty(pw1) || commonFn.isEmpty(pw2)) {
                layer.msg("密码不能为空");
            }
            else if (commonFn.isEqual(pw1, pw2)) {
                $("#submit").disabled = false;
            }
            else {
                layer.msg("两次密码不一致");
                $("#submit").disabled = true;
            }
        });
    });
</script>
<script type="text/javascript">
    (function () {
        var o = document.getElementById("zk1");
        Subt(o);
    })();

    function Subt(obj) {
        if (obj) {
            var s = obj.innerHTML;
            var p = document.createElement("span");
            var n = document.createElement("a");
            p.innerHTML = s.substring(0, 100);
            n.innerHTML = s.length > 100 ? "...&gt;&gt;" : "";
            n.href = "###";
            n.onclick = function () {
                if (n.innerHTML == "...&gt;&gt;") {
                    n.innerHTML = "&lt;&lt;";
                    p.innerHTML = s;
                } else {
                    n.innerHTML = "...&gt;&gt;";
                    p.innerHTML = s.substring(0, 100);
                }
            };
            obj.innerHTML = "";
            obj.appendChild(p);
            obj.appendChild(n);
        }
    }
</script>
<script type="text/javascript">
    (function () {
        var d = document.getElementById("zuock");
        Subt(d);
    })();

    function Subt(obj) {
        if (obj) {
            var s = obj.innerHTML;
            var p = document.createElement("div");
            var n = document.createElement("p");
            p.innerHTML = s.substring(0, 20);
            n.innerHTML = s.length > 20 ? "...&gt;&gt;" : "";
            n.href = "###";
            n.onclick = function () {
                if (n.innerHTML == "...&gt;&gt;") {
                    n.innerHTML = "&lt;&lt;";
                    p.innerHTML = s;
                } else {
                    n.innerHTML = "...&gt;&gt;";
                    p.innerHTML = s.substring(0, 20);
                }
            };
            obj.innerHTML = "";
            obj.appendChild(p);
            obj.appendChild(n);
        }
    }
</script>
<script type="text/javascript">
    (function () {
        var z = document.getElementById("zk2");
        Subt(z);
    })();

    function Subt(obj) {
        if (obj) {
            var s = obj.innerHTML;
            var p = document.createElement("span");
            var n = document.createElement("a");
            p.innerHTML = s.substring(0, 200);
            n.innerHTML = s.length > 200 ? "...&gt;&gt;" : "";
            n.href = "###";
            n.onclick = function () {
                if (n.innerHTML == "...&gt;&gt;") {
                    n.innerHTML = "&lt;&lt;";
                    p.innerHTML = s;
                } else {
                    n.innerHTML = "...&gt;&gt;";
                    p.innerHTML = s.substring(0, 200);
                }
            };
            obj.innerHTML = "";
            obj.appendChild(p);
            obj.appendChild(n);
        }
    }
</script>
<!-- Just to make our placeholder images work. Don't actually copy the next line! -->
</body>
</html>